{"id":"iTLl","dependencies":[{"name":"C:\\Users\\benne\\np\\nengi-2d-basic\\package.json","includedInParent":true,"mtime":1557038832290},{"name":"nengi","loc":{"line":1,"column":18},"parent":"C:\\Users\\benne\\np\\nengi-2d-basic\\client\\GameClient.js","resolved":"C:\\Users\\benne\\np\\nengi-2d-basic\\node_modules\\nengi\\indexBrowser.js"},{"name":"../common/nengiConfig","loc":{"line":2,"column":24},"parent":"C:\\Users\\benne\\np\\nengi-2d-basic\\client\\GameClient.js","resolved":"C:\\Users\\benne\\np\\nengi-2d-basic\\common\\nengiConfig.js"},{"name":"./InputSystem","loc":{"line":3,"column":24},"parent":"C:\\Users\\benne\\np\\nengi-2d-basic\\client\\GameClient.js","resolved":"C:\\Users\\benne\\np\\nengi-2d-basic\\client\\InputSystem.js"},{"name":"../common/command/MoveCommand","loc":{"line":4,"column":24},"parent":"C:\\Users\\benne\\np\\nengi-2d-basic\\client\\GameClient.js","resolved":"C:\\Users\\benne\\np\\nengi-2d-basic\\common\\command\\MoveCommand.js"},{"name":"../common/command/FireCommand","loc":{"line":5,"column":24},"parent":"C:\\Users\\benne\\np\\nengi-2d-basic\\client\\GameClient.js","resolved":"C:\\Users\\benne\\np\\nengi-2d-basic\\common\\command\\FireCommand.js"},{"name":"./graphics/PIXIRenderer","loc":{"line":6,"column":25},"parent":"C:\\Users\\benne\\np\\nengi-2d-basic\\client\\GameClient.js","resolved":"C:\\Users\\benne\\np\\nengi-2d-basic\\client\\graphics\\PIXIRenderer.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var e=a(require(\"nengi\")),t=a(require(\"../common/nengiConfig\")),n=a(require(\"./InputSystem\")),r=a(require(\"../common/command/MoveCommand\")),i=a(require(\"../common/command/FireCommand\")),o=a(require(\"./graphics/PIXIRenderer\"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}var d=function(){function a(){s(this,a),this.client=new e.default.Client(t.default),this.renderer=new o.default,this.input=new n.default,this.client.onConnect(function(e){console.log(\"onConnect response:\",e)}),this.client.onClose(function(){console.log(\"connection closed\")}),this.client.connect(\"ws://localhost:8079\")}return u(a,[{key:\"update\",value:function(e,t,n){var o=this,a=this.client.readNetwork();a.entities.forEach(function(e){e.createEntities.forEach(function(e){o.renderer.createEntity(e)}),e.updateEntities.forEach(function(e){o.renderer.updateEntity(e)}),e.deleteEntities.forEach(function(e){o.renderer.deleteEntity(e)})}),a.messages.forEach(function(e){o.renderer.processMessage(e)}),a.localMessages.forEach(function(e){o.renderer.processLocalMessage(e)});var s=this.input.frameState,c=0,u=this.renderer.toWorldCoordinates(this.input.currentState.mx,this.input.currentState.my);if(this.renderer.myEntity){var d=u.x-this.renderer.myEntity.x,l=u.y-this.renderer.myEntity.y;c=Math.atan2(l,d)}this.client.addCommand(new r.default(s.w,s.a,s.s,s.d,c,e)),s.mouseDown&&this.client.addCommand(new i.default(u.x,u.y)),this.input.releaseKeys(),this.client.update(),this.renderer.update(e)}}]),a}(),l=d;exports.default=l;"},"sourceMaps":{"js":{"mappings":[{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":0}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":13}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":20}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":35}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":43}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":56}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":57}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":64}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":68}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":76}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":89}},{"source":"../client/GameClient.js","original":{"line":1,"column":0},"generated":{"line":1,"column":91}},{"source":"../client/GameClient.js","original":{"line":1,"column":0},"generated":{"line":1,"column":95}},{"source":"../client/GameClient.js","original":{"line":1,"column":0},"generated":{"line":1,"column":97}},{"source":"../client/GameClient.js","original":{"line":1,"column":0},"generated":{"line":1,"column":99}},{"source":"../client/GameClient.js","original":{"line":1,"column":0},"generated":{"line":1,"column":107}},{"source":"../client/GameClient.js","original":{"line":2,"column":0},"generated":{"line":1,"column":117}},{"source":"../client/GameClient.js","original":{"line":2,"column":0},"generated":{"line":1,"column":119}},{"source":"../client/GameClient.js","original":{"line":2,"column":0},"generated":{"line":1,"column":121}},{"source":"../client/GameClient.js","original":{"line":2,"column":0},"generated":{"line":1,"column":129}},{"source":"../client/GameClient.js","original":{"line":3,"column":0},"generated":{"line":1,"column":155}},{"source":"../client/GameClient.js","original":{"line":3,"column":0},"generated":{"line":1,"column":157}},{"source":"../client/GameClient.js","original":{"line":3,"column":0},"generated":{"line":1,"column":159}},{"source":"../client/GameClient.js","original":{"line":3,"column":0},"generated":{"line":1,"column":167}},{"source":"../client/GameClient.js","original":{"line":4,"column":0},"generated":{"line":1,"column":185}},{"source":"../client/GameClient.js","original":{"line":4,"column":0},"generated":{"line":1,"column":187}},{"source":"../client/GameClient.js","original":{"line":4,"column":0},"generated":{"line":1,"column":189}},{"source":"../client/GameClient.js","original":{"line":4,"column":0},"generated":{"line":1,"column":197}},{"source":"../client/GameClient.js","original":{"line":5,"column":0},"generated":{"line":1,"column":231}},{"source":"../client/GameClient.js","original":{"line":5,"column":0},"generated":{"line":1,"column":233}},{"source":"../client/GameClient.js","original":{"line":5,"column":0},"generated":{"line":1,"column":235}},{"source":"../client/GameClient.js","original":{"line":5,"column":0},"generated":{"line":1,"column":243}},{"source":"../client/GameClient.js","original":{"line":6,"column":0},"generated":{"line":1,"column":277}},{"source":"../client/GameClient.js","original":{"line":6,"column":0},"generated":{"line":1,"column":279}},{"source":"../client/GameClient.js","original":{"line":6,"column":0},"generated":{"line":1,"column":281}},{"source":"../client/GameClient.js","original":{"line":6,"column":0},"generated":{"line":1,"column":289}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":317}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":326}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":328}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":331}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":338}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":341}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":343}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":354}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":356}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":357}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":365}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":368}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":377}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":379}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":381}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":384}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":389}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":402}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":405}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":411}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":415}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":425}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":462}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":471}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":473}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":475}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":478}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":482}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":486}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":488}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":490}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":492}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":494}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":501}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":505}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":506}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":510}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":512}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":514}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":517}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":519}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":530}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":532}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":545}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":547}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":549}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":563}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":565}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":575}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":579}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":581}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":591}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":594}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":601}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":616}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":618}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":620}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":624}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":628}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":637}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":639}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":641}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":643}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":646}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":653}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":656}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":658}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":660}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":670}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":673}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":676}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":678}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":680}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":683}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":8,"column":6},"generated":{"line":1,"column":685}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":8,"column":6},"generated":{"line":1,"column":689}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":691}},{"source":"../client/GameClient.js","original":{"line":9,"column":18},"generated":{"line":1,"column":702}},{"source":"../client/GameClient.js","original":{"line":9,"column":18},"generated":{"line":1,"column":711}},{"source":"../client/GameClient.js","original":{"line":9,"column":18},"generated":{"line":1,"column":715}},{"source":"../client/GameClient.js","original":{"line":9,"column":18},"generated":{"line":1,"column":717}},{"source":"../client/GameClient.js","original":{"line":9,"column":18},"generated":{"line":1,"column":722}},{"source":"../client/GameClient.js","name":"client","original":{"line":10,"column":13},"generated":{"line":1,"column":725}},{"source":"../client/GameClient.js","name":"client","original":{"line":10,"column":13},"generated":{"line":1,"column":730}},{"source":"../client/GameClient.js","original":{"line":10,"column":22},"generated":{"line":1,"column":737}},{"source":"../client/GameClient.js","name":"nengi","original":{"line":10,"column":26},"generated":{"line":1,"column":741}},{"source":"../client/GameClient.js","name":"Client","original":{"line":10,"column":32},"generated":{"line":1,"column":743}},{"source":"../client/GameClient.js","name":"Client","original":{"line":10,"column":32},"generated":{"line":1,"column":751}},{"source":"../client/GameClient.js","name":"nengiConfig","original":{"line":10,"column":39},"generated":{"line":1,"column":758}},{"source":"../client/GameClient.js","original":{"line":10,"column":22},"generated":{"line":1,"column":760}},{"source":"../client/GameClient.js","name":"renderer","original":{"line":11,"column":13},"generated":{"line":1,"column":769}},{"source":"../client/GameClient.js","name":"renderer","original":{"line":11,"column":13},"generated":{"line":1,"column":774}},{"source":"../client/GameClient.js","original":{"line":11,"column":24},"generated":{"line":1,"column":783}},{"source":"../client/GameClient.js","name":"PIXIRenderer","original":{"line":11,"column":28},"generated":{"line":1,"column":787}},{"source":"../client/GameClient.js","original":{"line":11,"column":24},"generated":{"line":1,"column":789}},{"source":"../client/GameClient.js","name":"input","original":{"line":12,"column":13},"generated":{"line":1,"column":797}},{"source":"../client/GameClient.js","name":"input","original":{"line":12,"column":13},"generated":{"line":1,"column":802}},{"source":"../client/GameClient.js","original":{"line":12,"column":21},"generated":{"line":1,"column":808}},{"source":"../client/GameClient.js","name":"InputSystem","original":{"line":12,"column":25},"generated":{"line":1,"column":812}},{"source":"../client/GameClient.js","original":{"line":12,"column":21},"generated":{"line":1,"column":814}},{"source":"../client/GameClient.js","name":"client","original":{"line":14,"column":13},"generated":{"line":1,"column":822}},{"source":"../client/GameClient.js","name":"client","original":{"line":14,"column":13},"generated":{"line":1,"column":827}},{"source":"../client/GameClient.js","name":"onConnect","original":{"line":14,"column":20},"generated":{"line":1,"column":834}},{"source":"../client/GameClient.js","original":{"line":14,"column":30},"generated":{"line":1,"column":844}},{"source":"../client/GameClient.js","name":"res","original":{"line":14,"column":30},"generated":{"line":1,"column":853}},{"source":"../client/GameClient.js","name":"console","original":{"line":15,"column":12},"generated":{"line":1,"column":856}},{"source":"../client/GameClient.js","name":"log","original":{"line":15,"column":20},"generated":{"line":1,"column":864}},{"source":"../client/GameClient.js","original":{"line":15,"column":24},"generated":{"line":1,"column":868}},{"source":"../client/GameClient.js","name":"res","original":{"line":15,"column":47},"generated":{"line":1,"column":890}},{"source":"../client/GameClient.js","name":"client","original":{"line":18,"column":13},"generated":{"line":1,"column":895}},{"source":"../client/GameClient.js","name":"client","original":{"line":18,"column":13},"generated":{"line":1,"column":900}},{"source":"../client/GameClient.js","name":"onClose","original":{"line":18,"column":20},"generated":{"line":1,"column":907}},{"source":"../client/GameClient.js","original":{"line":18,"column":28},"generated":{"line":1,"column":915}},{"source":"../client/GameClient.js","name":"console","original":{"line":19,"column":12},"generated":{"line":1,"column":926}},{"source":"../client/GameClient.js","name":"log","original":{"line":19,"column":20},"generated":{"line":1,"column":934}},{"source":"../client/GameClient.js","original":{"line":19,"column":24},"generated":{"line":1,"column":938}},{"source":"../client/GameClient.js","name":"client","original":{"line":22,"column":13},"generated":{"line":1,"column":961}},{"source":"../client/GameClient.js","name":"client","original":{"line":22,"column":13},"generated":{"line":1,"column":966}},{"source":"../client/GameClient.js","name":"connect","original":{"line":22,"column":20},"generated":{"line":1,"column":973}},{"source":"../client/GameClient.js","original":{"line":22,"column":28},"generated":{"line":1,"column":981}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":1004}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":1011}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":1013}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":1015}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":1016}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":1017}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":1021}},{"source":"../client/GameClient.js","name":"delta","original":{"line":25,"column":11},"generated":{"line":1,"column":1030}},{"source":"../client/GameClient.js","name":"delta","original":{"line":25,"column":11},"generated":{"line":1,"column":1036}},{"source":"../client/GameClient.js","name":"delta","original":{"line":25,"column":11},"generated":{"line":1,"column":1045}},{"source":"../client/GameClient.js","name":"tick","original":{"line":25,"column":18},"generated":{"line":1,"column":1047}},{"source":"../client/GameClient.js","name":"now","original":{"line":25,"column":24},"generated":{"line":1,"column":1049}},{"source":"../client/GameClient.js","original":{"line":25,"column":29},"generated":{"line":1,"column":1052}},{"source":"../client/GameClient.js","original":{"line":25,"column":29},"generated":{"line":1,"column":1056}},{"source":"../client/GameClient.js","original":{"line":25,"column":29},"generated":{"line":1,"column":1058}},{"source":"../client/GameClient.js","name":"network","original":{"line":27,"column":14},"generated":{"line":1,"column":1063}},{"source":"../client/GameClient.js","original":{"line":27,"column":24},"generated":{"line":1,"column":1065}},{"source":"../client/GameClient.js","name":"client","original":{"line":27,"column":29},"generated":{"line":1,"column":1070}},{"source":"../client/GameClient.js","name":"readNetwork","original":{"line":27,"column":36},"generated":{"line":1,"column":1077}},{"source":"../client/GameClient.js","name":"network","original":{"line":29,"column":8},"generated":{"line":1,"column":1091}},{"source":"../client/GameClient.js","name":"entities","original":{"line":29,"column":16},"generated":{"line":1,"column":1093}},{"source":"../client/GameClient.js","name":"forEach","original":{"line":29,"column":25},"generated":{"line":1,"column":1102}},{"source":"../client/GameClient.js","original":{"line":29,"column":33},"generated":{"line":1,"column":1110}},{"source":"../client/GameClient.js","name":"snapshot","original":{"line":29,"column":33},"generated":{"line":1,"column":1119}},{"source":"../client/GameClient.js","name":"snapshot","original":{"line":30,"column":12},"generated":{"line":1,"column":1122}},{"source":"../client/GameClient.js","name":"createEntities","original":{"line":30,"column":21},"generated":{"line":1,"column":1124}},{"source":"../client/GameClient.js","name":"forEach","original":{"line":30,"column":36},"generated":{"line":1,"column":1139}},{"source":"../client/GameClient.js","original":{"line":30,"column":44},"generated":{"line":1,"column":1147}},{"source":"../client/GameClient.js","name":"entity","original":{"line":30,"column":44},"generated":{"line":1,"column":1156}},{"source":"../client/GameClient.js","original":{"line":31,"column":16},"generated":{"line":1,"column":1159}},{"source":"../client/GameClient.js","name":"renderer","original":{"line":31,"column":21},"generated":{"line":1,"column":1161}},{"source":"../client/GameClient.js","name":"createEntity","original":{"line":31,"column":30},"generated":{"line":1,"column":1170}},{"source":"../client/GameClient.js","name":"entity","original":{"line":31,"column":43},"generated":{"line":1,"column":1183}},{"source":"../client/GameClient.js","name":"snapshot","original":{"line":34,"column":12},"generated":{"line":1,"column":1188}},{"source":"../client/GameClient.js","name":"updateEntities","original":{"line":34,"column":21},"generated":{"line":1,"column":1190}},{"source":"../client/GameClient.js","name":"forEach","original":{"line":34,"column":36},"generated":{"line":1,"column":1205}},{"source":"../client/GameClient.js","original":{"line":34,"column":44},"generated":{"line":1,"column":1213}},{"source":"../client/GameClient.js","name":"update","original":{"line":34,"column":44},"generated":{"line":1,"column":1222}},{"source":"../client/GameClient.js","original":{"line":35,"column":16},"generated":{"line":1,"column":1225}},{"source":"../client/GameClient.js","name":"renderer","original":{"line":35,"column":21},"generated":{"line":1,"column":1227}},{"source":"../client/GameClient.js","name":"updateEntity","original":{"line":35,"column":30},"generated":{"line":1,"column":1236}},{"source":"../client/GameClient.js","name":"update","original":{"line":35,"column":43},"generated":{"line":1,"column":1249}},{"source":"../client/GameClient.js","name":"snapshot","original":{"line":38,"column":12},"generated":{"line":1,"column":1254}},{"source":"../client/GameClient.js","name":"deleteEntities","original":{"line":38,"column":21},"generated":{"line":1,"column":1256}},{"source":"../client/GameClient.js","name":"forEach","original":{"line":38,"column":36},"generated":{"line":1,"column":1271}},{"source":"../client/GameClient.js","original":{"line":38,"column":44},"generated":{"line":1,"column":1279}},{"source":"../client/GameClient.js","name":"nid","original":{"line":38,"column":44},"generated":{"line":1,"column":1288}},{"source":"../client/GameClient.js","original":{"line":39,"column":16},"generated":{"line":1,"column":1291}},{"source":"../client/GameClient.js","name":"renderer","original":{"line":39,"column":21},"generated":{"line":1,"column":1293}},{"source":"../client/GameClient.js","name":"deleteEntity","original":{"line":39,"column":30},"generated":{"line":1,"column":1302}},{"source":"../client/GameClient.js","name":"nid","original":{"line":39,"column":43},"generated":{"line":1,"column":1315}},{"source":"../client/GameClient.js","name":"network","original":{"line":43,"column":8},"generated":{"line":1,"column":1322}},{"source":"../client/GameClient.js","name":"messages","original":{"line":43,"column":16},"generated":{"line":1,"column":1324}},{"source":"../client/GameClient.js","name":"forEach","original":{"line":43,"column":25},"generated":{"line":1,"column":1333}},{"source":"../client/GameClient.js","original":{"line":43,"column":33},"generated":{"line":1,"column":1341}},{"source":"../client/GameClient.js","name":"message","original":{"line":43,"column":33},"generated":{"line":1,"column":1350}},{"source":"../client/GameClient.js","original":{"line":44,"column":12},"generated":{"line":1,"column":1353}},{"source":"../client/GameClient.js","name":"renderer","original":{"line":44,"column":17},"generated":{"line":1,"column":1355}},{"source":"../client/GameClient.js","name":"processMessage","original":{"line":44,"column":26},"generated":{"line":1,"column":1364}},{"source":"../client/GameClient.js","name":"message","original":{"line":44,"column":41},"generated":{"line":1,"column":1379}},{"source":"../client/GameClient.js","name":"network","original":{"line":47,"column":8},"generated":{"line":1,"column":1384}},{"source":"../client/GameClient.js","name":"localMessages","original":{"line":47,"column":16},"generated":{"line":1,"column":1386}},{"source":"../client/GameClient.js","name":"forEach","original":{"line":47,"column":30},"generated":{"line":1,"column":1400}},{"source":"../client/GameClient.js","original":{"line":47,"column":38},"generated":{"line":1,"column":1408}},{"source":"../client/GameClient.js","name":"localMessage","original":{"line":47,"column":38},"generated":{"line":1,"column":1417}},{"source":"../client/GameClient.js","original":{"line":48,"column":12},"generated":{"line":1,"column":1420}},{"source":"../client/GameClient.js","name":"renderer","original":{"line":48,"column":17},"generated":{"line":1,"column":1422}},{"source":"../client/GameClient.js","name":"processLocalMessage","original":{"line":48,"column":26},"generated":{"line":1,"column":1431}},{"source":"../client/GameClient.js","name":"localMessage","original":{"line":48,"column":46},"generated":{"line":1,"column":1451}},{"source":"../client/GameClient.js","name":"input","original":{"line":53,"column":14},"generated":{"line":1,"column":1456}},{"source":"../client/GameClient.js","name":"input","original":{"line":53,"column":14},"generated":{"line":1,"column":1460}},{"source":"../client/GameClient.js","original":{"line":53,"column":22},"generated":{"line":1,"column":1462}},{"source":"../client/GameClient.js","name":"input","original":{"line":53,"column":27},"generated":{"line":1,"column":1467}},{"source":"../client/GameClient.js","name":"frameState","original":{"line":53,"column":33},"generated":{"line":1,"column":1473}},{"source":"../client/GameClient.js","name":"rotation","original":{"line":55,"column":12},"generated":{"line":1,"column":1484}},{"source":"../client/GameClient.js","original":{"line":55,"column":23},"generated":{"line":1,"column":1486}},{"source":"../client/GameClient.js","name":"worldCoord","original":{"line":56,"column":14},"generated":{"line":1,"column":1488}},{"source":"../client/GameClient.js","original":{"line":56,"column":27},"generated":{"line":1,"column":1490}},{"source":"../client/GameClient.js","name":"renderer","original":{"line":56,"column":32},"generated":{"line":1,"column":1495}},{"source":"../client/GameClient.js","name":"toWorldCoordinates","original":{"line":56,"column":41},"generated":{"line":1,"column":1504}},{"source":"../client/GameClient.js","original":{"line":56,"column":60},"generated":{"line":1,"column":1523}},{"source":"../client/GameClient.js","name":"input","original":{"line":56,"column":65},"generated":{"line":1,"column":1528}},{"source":"../client/GameClient.js","name":"currentState","original":{"line":56,"column":71},"generated":{"line":1,"column":1534}},{"source":"../client/GameClient.js","name":"mx","original":{"line":56,"column":84},"generated":{"line":1,"column":1547}},{"source":"../client/GameClient.js","original":{"line":56,"column":88},"generated":{"line":1,"column":1550}},{"source":"../client/GameClient.js","name":"input","original":{"line":56,"column":93},"generated":{"line":1,"column":1555}},{"source":"../client/GameClient.js","name":"currentState","original":{"line":56,"column":99},"generated":{"line":1,"column":1561}},{"source":"../client/GameClient.js","name":"my","original":{"line":56,"column":112},"generated":{"line":1,"column":1574}},{"source":"../client/GameClient.js","original":{"line":58,"column":12},"generated":{"line":1,"column":1578}},{"source":"../client/GameClient.js","original":{"line":58,"column":12},"generated":{"line":1,"column":1581}},{"source":"../client/GameClient.js","name":"renderer","original":{"line":58,"column":17},"generated":{"line":1,"column":1586}},{"source":"../client/GameClient.js","name":"myEntity","original":{"line":58,"column":26},"generated":{"line":1,"column":1595}},{"source":"../client/GameClient.js","original":{"line":58,"column":36},"generated":{"line":1,"column":1604}},{"source":"../client/GameClient.js","name":"dx","original":{"line":60,"column":18},"generated":{"line":1,"column":1605}},{"source":"../client/GameClient.js","name":"dx","original":{"line":60,"column":18},"generated":{"line":1,"column":1609}},{"source":"../client/GameClient.js","name":"worldCoord","original":{"line":60,"column":23},"generated":{"line":1,"column":1611}},{"source":"../client/GameClient.js","name":"x","original":{"line":60,"column":34},"generated":{"line":1,"column":1613}},{"source":"../client/GameClient.js","original":{"line":60,"column":38},"generated":{"line":1,"column":1615}},{"source":"../client/GameClient.js","name":"renderer","original":{"line":60,"column":43},"generated":{"line":1,"column":1620}},{"source":"../client/GameClient.js","name":"myEntity","original":{"line":60,"column":52},"generated":{"line":1,"column":1629}},{"source":"../client/GameClient.js","name":"x","original":{"line":60,"column":61},"generated":{"line":1,"column":1638}},{"source":"../client/GameClient.js","name":"dy","original":{"line":61,"column":18},"generated":{"line":1,"column":1640}},{"source":"../client/GameClient.js","name":"worldCoord","original":{"line":61,"column":23},"generated":{"line":1,"column":1642}},{"source":"../client/GameClient.js","name":"y","original":{"line":61,"column":34},"generated":{"line":1,"column":1644}},{"source":"../client/GameClient.js","original":{"line":61,"column":38},"generated":{"line":1,"column":1646}},{"source":"../client/GameClient.js","name":"renderer","original":{"line":61,"column":43},"generated":{"line":1,"column":1651}},{"source":"../client/GameClient.js","name":"myEntity","original":{"line":61,"column":52},"generated":{"line":1,"column":1660}},{"source":"../client/GameClient.js","name":"y","original":{"line":61,"column":61},"generated":{"line":1,"column":1669}},{"source":"../client/GameClient.js","name":"rotation","original":{"line":62,"column":12},"generated":{"line":1,"column":1671}},{"source":"../client/GameClient.js","name":"Math","original":{"line":62,"column":23},"generated":{"line":1,"column":1673}},{"source":"../client/GameClient.js","name":"atan2","original":{"line":62,"column":28},"generated":{"line":1,"column":1678}},{"source":"../client/GameClient.js","name":"dy","original":{"line":62,"column":34},"generated":{"line":1,"column":1684}},{"source":"../client/GameClient.js","name":"dx","original":{"line":62,"column":38},"generated":{"line":1,"column":1686}},{"source":"../client/GameClient.js","name":"client","original":{"line":65,"column":13},"generated":{"line":1,"column":1689}},{"source":"../client/GameClient.js","name":"client","original":{"line":65,"column":13},"generated":{"line":1,"column":1694}},{"source":"../client/GameClient.js","name":"addCommand","original":{"line":65,"column":20},"generated":{"line":1,"column":1701}},{"source":"../client/GameClient.js","original":{"line":65,"column":31},"generated":{"line":1,"column":1712}},{"source":"../client/GameClient.js","name":"MoveCommand","original":{"line":65,"column":35},"generated":{"line":1,"column":1716}},{"source":"../client/GameClient.js","original":{"line":65,"column":31},"generated":{"line":1,"column":1718}},{"source":"../client/GameClient.js","name":"input","original":{"line":65,"column":47},"generated":{"line":1,"column":1726}},{"source":"../client/GameClient.js","name":"w","original":{"line":65,"column":53},"generated":{"line":1,"column":1728}},{"source":"../client/GameClient.js","name":"input","original":{"line":65,"column":56},"generated":{"line":1,"column":1730}},{"source":"../client/GameClient.js","name":"a","original":{"line":65,"column":62},"generated":{"line":1,"column":1732}},{"source":"../client/GameClient.js","name":"input","original":{"line":65,"column":65},"generated":{"line":1,"column":1734}},{"source":"../client/GameClient.js","name":"s","original":{"line":65,"column":71},"generated":{"line":1,"column":1736}},{"source":"../client/GameClient.js","name":"input","original":{"line":65,"column":74},"generated":{"line":1,"column":1738}},{"source":"../client/GameClient.js","name":"d","original":{"line":65,"column":80},"generated":{"line":1,"column":1740}},{"source":"../client/GameClient.js","name":"rotation","original":{"line":65,"column":83},"generated":{"line":1,"column":1742}},{"source":"../client/GameClient.js","name":"delta","original":{"line":65,"column":93},"generated":{"line":1,"column":1744}},{"source":"../client/GameClient.js","name":"input","original":{"line":67,"column":12},"generated":{"line":1,"column":1748}},{"source":"../client/GameClient.js","name":"mouseDown","original":{"line":67,"column":18},"generated":{"line":1,"column":1750}},{"source":"../client/GameClient.js","name":"client","original":{"line":68,"column":17},"generated":{"line":1,"column":1761}},{"source":"../client/GameClient.js","name":"client","original":{"line":68,"column":17},"generated":{"line":1,"column":1766}},{"source":"../client/GameClient.js","name":"addCommand","original":{"line":68,"column":24},"generated":{"line":1,"column":1773}},{"source":"../client/GameClient.js","original":{"line":68,"column":35},"generated":{"line":1,"column":1784}},{"source":"../client/GameClient.js","name":"FireCommand","original":{"line":68,"column":39},"generated":{"line":1,"column":1788}},{"source":"../client/GameClient.js","original":{"line":68,"column":35},"generated":{"line":1,"column":1790}},{"source":"../client/GameClient.js","name":"worldCoord","original":{"line":68,"column":51},"generated":{"line":1,"column":1798}},{"source":"../client/GameClient.js","name":"x","original":{"line":68,"column":62},"generated":{"line":1,"column":1800}},{"source":"../client/GameClient.js","name":"worldCoord","original":{"line":68,"column":65},"generated":{"line":1,"column":1802}},{"source":"../client/GameClient.js","name":"y","original":{"line":68,"column":76},"generated":{"line":1,"column":1804}},{"source":"../client/GameClient.js","name":"input","original":{"line":71,"column":13},"generated":{"line":1,"column":1808}},{"source":"../client/GameClient.js","name":"input","original":{"line":71,"column":13},"generated":{"line":1,"column":1813}},{"source":"../client/GameClient.js","name":"releaseKeys","original":{"line":71,"column":19},"generated":{"line":1,"column":1819}},{"source":"../client/GameClient.js","name":"client","original":{"line":72,"column":13},"generated":{"line":1,"column":1833}},{"source":"../client/GameClient.js","name":"client","original":{"line":72,"column":13},"generated":{"line":1,"column":1838}},{"source":"../client/GameClient.js","name":"update","original":{"line":72,"column":20},"generated":{"line":1,"column":1845}},{"source":"../client/GameClient.js","name":"renderer","original":{"line":76,"column":13},"generated":{"line":1,"column":1854}},{"source":"../client/GameClient.js","name":"renderer","original":{"line":76,"column":13},"generated":{"line":1,"column":1859}},{"source":"../client/GameClient.js","name":"update","original":{"line":76,"column":22},"generated":{"line":1,"column":1868}},{"source":"../client/GameClient.js","name":"delta","original":{"line":76,"column":29},"generated":{"line":1,"column":1875}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":1882}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":1884}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":1887}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":1889}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":1891}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":1899}},{"source":"../client/GameClient.js","name":"GameClient","original":{"line":81,"column":15},"generated":{"line":1,"column":1907}}],"sources":{"../client/GameClient.js":"import nengi from 'nengi'\r\nimport nengiConfig from '../common/nengiConfig'\r\nimport InputSystem from './InputSystem'\r\nimport MoveCommand from '../common/command/MoveCommand'\r\nimport FireCommand from '../common/command/FireCommand'\r\nimport PIXIRenderer from './graphics/PIXIRenderer'\r\n\r\nclass GameClient {\r\n    constructor() {\r\n        this.client = new nengi.Client(nengiConfig)\r\n        this.renderer = new PIXIRenderer()\r\n        this.input = new InputSystem()\r\n\r\n        this.client.onConnect(res => {\r\n            console.log('onConnect response:', res)\r\n        })\r\n\r\n        this.client.onClose(() => {\r\n            console.log('connection closed')\r\n        })\r\n\r\n        this.client.connect('ws://localhost:8079')  \r\n    }\r\n\r\n    update(delta, tick, now) {\r\n        /* receiving */\r\n        const network = this.client.readNetwork()\r\n\r\n        network.entities.forEach(snapshot => {\r\n            snapshot.createEntities.forEach(entity => {\r\n                this.renderer.createEntity(entity)\r\n            })\r\n\r\n            snapshot.updateEntities.forEach(update => {\r\n                this.renderer.updateEntity(update)\r\n            })\r\n\r\n            snapshot.deleteEntities.forEach(nid => {\r\n                this.renderer.deleteEntity(nid)\r\n            })\r\n        })\r\n\r\n        network.messages.forEach(message => {\r\n            this.renderer.processMessage(message)\r\n        })\r\n\r\n        network.localMessages.forEach(localMessage => {\r\n            this.renderer.processLocalMessage(localMessage)\r\n        })\r\n        /* * */\r\n\r\n        /* sending */\r\n        const input = this.input.frameState\r\n\r\n        let rotation = 0\r\n        const worldCoord = this.renderer.toWorldCoordinates(this.input.currentState.mx, this.input.currentState.my)\r\n\r\n        if (this.renderer.myEntity) {\r\n            // calculate the direction our character is facing\r\n            const dx = worldCoord.x - this.renderer.myEntity.x\r\n            const dy = worldCoord.y - this.renderer.myEntity.y\r\n            rotation = Math.atan2(dy, dx)\r\n        }\r\n\r\n        this.client.addCommand(new MoveCommand(input.w, input.a, input.s, input.d, rotation, delta))\r\n\r\n        if (input.mouseDown) {\r\n            this.client.addCommand(new FireCommand(worldCoord.x, worldCoord.y))\r\n        }\r\n\r\n        this.input.releaseKeys()\r\n        this.client.update()\r\n        /* * */\r\n\r\n        /* rendering */\r\n        this.renderer.update(delta)\r\n        /* * */\r\n    }\r\n}\r\n\r\nexport default GameClient\r\n"},"lineCount":null}},"error":null,"hash":"26bd081266dae0f88f8a9d96ccb8bf07","cacheData":{"env":{}}}